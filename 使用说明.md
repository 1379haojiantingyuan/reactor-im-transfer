# ChatSystem 项目使用说明

本项目的简易高并发聊天系统，支持多人即时通讯、私聊等功能。

## 1. 环境准备

在开始之前，请确保您的系统（推荐 Ubuntu/Linux）已安装以下依赖：

### 基础编译工具
- **g++**: 支持 C++17
- **make**: 构建工具

### 依赖库
- **ncurses**: 用于客户端终端界面
  ```bash
  sudo apt-get update
  sudo apt-get install -y libncurses-dev build-essential
  ```

## 2. 编译构建

项目提供了一键编译的 `Makefile`。

1. 进入项目根目录：
   ```bash
   cd /home/onit/projects/ChatSystem
   ```
2. 执行编译命令：
   ```bash
   make
   ```
   
   编译成功后，将在 `bin/` 目录下生成两个可执行文件：
   - `bin/server`: 服务端程序
   - `bin/client`: 客户端程序

3. (可选) 清理编译文件：
   ```bash
   make clean
   ```

## 3. 启动运行

### 3.1 启动服务端

服务端默认监听 `8080` 端口。

```bash
./bin/server
```

启动后，服务端会显示日志信息，表明 Epoll 事件循环已开始运行。

### 3.2 启动客户端

客户端需要指定 **用户名** 才能启动，默认连接本地 (`127.0.0.1`) 的服务端。

**语法**:
```bash
./bin/client <用户名> [服务器IP]
```

**示例 1：连接本地服务器**
```bash
./bin/client Alice
```

**示例 2：连接远程服务器** 
(假设服务器 IP 为 192.168.1.100)
```bash
./bin/client Bob 192.168.1.100
```

## 4. 功能使用指南

客户端启动后进入 ncurses 终端界面。

### 🗨️ 公共聊天
直接在输入框输入消息并回车，消息将发送给所有在线用户。

### 🔒 私聊消息
使用 `/private` 指令发送私信。

**语法**:
```
/private <目标用户名> <消息内容>
```

**示例**:
```
/private Bob 你好，这是私密消息
```


### 📂 文件下载
支持从服务器下载文件。所有可下载文件均存储在服务端 `file_storage/` 目录下。

**语法**:
```
/download <文件名>
```

**示例**:
```
/download test.txt
```
下载成功后，文件将保存到当前客户端运行的目录下。

### 🚪 退出程序
在输入框输入 `/quit` 即可断开连接并退出客户端。
```
/quit
```

## 5. 常见问题

- **客户端连接失败**: 请检查服务端是否已启动，且防火墙未拦截 8080 端口。
- **缺失 ncurses 库**: 编译报错 `fatal error: ncurses.h: No such file or directory` 时，请运行环境准备中的安装命令。
